# éªŒè¯å¯¹æ¥ç»“æ„ä¿®å¤

## å¿«é€ŸéªŒè¯æ­¥éª¤

### 1. è¿è¡Œå¯¹é½æµ‹è¯•
```bash
cd /home/zhangsd/repos/MEPS
conda activate meps
python tests/test_docking_alignment.py
```

é¢„æœŸè¾“å‡ºï¼š
```
æµ‹è¯•çŠ¶æ€: PASSED
ğŸ‰ å¯¹æ¥ç»“æ„å¯¹é½åŠŸèƒ½å·¥ä½œæ­£å¸¸!
   - æ‰€æœ‰åŸå­éƒ½å­˜åœ¨ï¼ˆåŒ…æ‹¬æ°¢åŸå­ï¼‰
   - æ²¡æœ‰åŸå­é‡å 
   - åˆ†å­é—´è·ç¦»åˆç†
```

### 2. æ£€æŸ¥ç”Ÿæˆçš„å¤åˆç‰©ç»“æ„
```bash
cat test_docking_alignment/complex_test.xyz
```

éªŒè¯ç‚¹ï¼š
- âœ… æ€»åŸå­æ•° = 17 (12ä¸ªè‹¯ + 5ä¸ªç”²çƒ·)
- âœ… ç”²çƒ·ä¸åœ¨åŸç‚¹ (åº”åœ¨ z â‰ˆ -3.5 Ã…)
- âœ… åŒ…å«æ‰€æœ‰æ°¢åŸå­

### 3. é‡æ–°è¿è¡Œç¤ºä¾‹3ï¼ˆå¯é€‰ï¼‰
```bash
cd examples
python tutorial_example.py
# é€‰æ‹© 3 (åˆ†æ­¥æ‰§è¡Œæµç¨‹)
```

æ£€æŸ¥ç”Ÿæˆçš„ `complex.gjf` æ–‡ä»¶ï¼š
```bash
cat example_calculations/step_by_step/complex/complex.gjf
```

åº”è¯¥çœ‹åˆ°ï¼š
- Fragment=1: 12ä¸ªè‹¯åŸå­åœ¨åŸç‚¹é™„è¿‘
- Fragment=2: 5ä¸ªç”²çƒ·åŸå­åœ¨å¯¹æ¥ä½ç½®ï¼ˆéåŸç‚¹ï¼‰

## å¯¹æ¯”æ£€æŸ¥

### ä¿®å¤å‰çš„é—®é¢˜
```
C(Fragment=2)  0.000  0.000  0.000  â† é”™è¯¯ï¼šåœ¨åŸç‚¹
H(Fragment=2)  0.630  0.630  0.630
```

### ä¿®å¤åçš„æ­£ç¡®ç»“æœ
```
C(Fragment=2)  0.041  0.007 -3.544  â† æ­£ç¡®ï¼šåœ¨å¯¹æ¥ä½ç½®
H(Fragment=2)  0.041  0.007 -2.455  â† æ­£ç¡®ï¼šæ°¢åŸå­éƒ½åœ¨
H(Fragment=2)  1.068  0.007 -3.907
H(Fragment=2) -0.472 -0.882 -3.907
H(Fragment=2) -0.472  0.896 -3.907
```

## å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | æœŸæœ›å€¼ | å¦‚ä½•æ£€æŸ¥ |
|------|--------|----------|
| æ€»åŸå­æ•° | 17 | ç¬¬1è¡Œåº”ä¸º `17` |
| ç¢³åŸå­æ•° | 7 | è®¡æ•° `C` è¡Œ |
| æ°¢åŸå­æ•° | 10 | è®¡æ•° `H` è¡Œ |
| ç”²çƒ·zåæ ‡ | -3 åˆ° -4 | Fragment=2çš„zå€¼ |
| æœ€å°åŸå­é—´è· | >1.0 Ã… | è¿è¡Œæµ‹è¯•è„šæœ¬ |

## æ•…éšœæ’é™¤

### å¦‚æœæµ‹è¯•å¤±è´¥

1. **åŸå­æ•°ä¸å¯¹**
   ```bash
   # æ£€æŸ¥æ˜¯å¦æ­£ç¡®å¯¼å…¥æ¨¡å—
   python -c "from src.structure_parser import StructureParser; print('OK')"
   ```

2. **ä»æœ‰é‡å **
   ```bash
   # æ£€æŸ¥Kabschç®—æ³•å®ç°
   python -c "
   from src.structure_parser import StructureParser
   import numpy as np
   p = StructureParser()
   print(hasattr(p, 'align_to'))  # åº”è¯¥æ˜¯ True
   "
   ```

3. **æ°¢åŸå­ä¸¢å¤±**
   ```bash
   # æ£€æŸ¥å¯¹æ¥ä»£ç 
   grep -n "align_to" src/vina_docking.py  # åº”è¯¥æ‰¾åˆ°è°ƒç”¨
   ```

## æ–‡æ¡£å‚è€ƒ

- è¯¦ç»†ä¿®å¤æŠ¥å‘Š: `docs/DOCKING_ALIGNMENT_FIX.md`
- æµ‹è¯•æŠ¥å‘Š: `TEST_REPORT.md` (2.8èŠ‚)
- Vinaè§£æä¿®å¤: `docs/VINA_PARSING_FIX.md`

## é¢„æœŸè¡Œä¸º

ä¿®å¤åçš„å¯¹æ¥åŠŸèƒ½åº”è¯¥ï¼š
- âœ… ä¿ç•™æ‰€æœ‰æ°¢åŸå­
- âœ… åº”ç”¨æ­£ç¡®çš„æ—‹è½¬å’Œå¹³ç§»
- âœ… é¿å…åˆ†å­é‡å 
- âœ… ç”Ÿæˆåˆç†çš„å¤åˆç‰©ç»“æ„
